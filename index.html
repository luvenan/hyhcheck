<!DOCTYPE html>
<html>
<head>
  <title>HYH check</title>
  <link href="./Resources/style.css" type="text/css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  

</head>
<body>
    <header> 
      <h1> Is my food migraine safe? </h1>  
    </header>
            
    <main>
      <p>The Heal Your Headache Diet was created by Dr. David Buchholz and published in the book by the same name. It includes the most common migraine trigger foods reported by his patients. People with frequent migraine attacks might benefit from adopting this diet for at least four months - or until migraines decrease signficantly - and then attempt to reintroduce foods individually to identify their own food triggers.</p>
      <br>
      <p>This website was created to make it easier to determine if a particular food is or is not compliant with the hyh diet. Simply type or paste the ingredients in the box below, and click on the buttom "is it safe?" </p>
      <br>
      <p> This is a prototype, the only triggers currently programmed are: peanut, almond, msg, orange, soy sauce, banana, and chocolate.</p>
      

      <!--Code the input area here-->

      <form id='ingredForm'>
        <textarea id='textbox' name='ingredList' rows='20' cols='80' placeholder="Type or paste the ingredients here, separated by a comma and one space. Eg: banana, apple, peanut." required></textarea>
      </form> 
      <br>  
        <button id='checkbutton'>Is it safe?</button>
        <button id='resetbutton' hidden>Clear</button>
      

      <!--Post results here, have things in categories (MSG, types of beans, citrus fruits, etc.) to make it simpler and more readable. Colorcode the answers-->
      <div id='results'>
      <h2 id="notsafe" hidden>This product is not safe on the HYH diet, it contains these triggers: <span id='listoftriggers'></span></h2>
      <h2 id="safe" hidden>This product is safe on the HYH diet!</h2>
      </div>

      <!-- Test area to learn how to use papa parse-->

      <input type="file" id="upload-csv" accept="csv">
      <button id="btn-upload-csv"> Read </button>
      <table id="tbl-data"> </table>
      <script type="text/javascript"> 
        let btn_upload = document.getElementById('btn-upload-csv').addEventListener('click', ()=> {
          console.log('clicked')
          Papa.parse(document.getElementById('upload-csv').files[0], {
            download: true,
            header: false,
            complete: function(csvfile){
              csvfile.data.map((data, index)=> {
                let table = document.getElementById('tbl-data');
                generateTableHead(table, data);
              })
            }
          })
        });

        function generateTableHead(table, data) {
    let thead = table.createTHead();
    let row = thead.insertRow();
    for (let key of data) {
        let th = document.createElement('th');
        let text = document.createTextNode(key);
        th.appendChild(text);
        row.appendChild(th);
    }
}

    
      </script>

    </main>


   
<footer>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.11/jquery.csv.min.js" integrity="sha512-Y8iWYJDo6HiTo5xtml1g4QqHtl/PO1w+dmUpQfQSOTqKNsMhExfyPN2ncNAe9JuJUSKzwK/b6oaNPop4MXzkwg==" crossorigin="anonymous"></script>
</head>

<script  src="./papaparse.min.js"></script>
<!--<script  src="./package.json"></script>
<script  src="./package-lock.json"></script> -->
<script  src="./Resources/main.js"></script> 
</body>
</html>